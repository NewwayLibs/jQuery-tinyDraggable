(function(a){a.fn.tinyDraggable=function(b){var d={handle:0,exclude:0,allowXDrag:true,allowYDrag:true,start:null,step:null,finish:null};var c=a.extend(d,b);return this.each(function(){var f,e,g=a(this),h=c.handle?a(c.handle,g):g;h.bind("vmousedown mousedown touchstart",function(k){if(c.exclude&&~a.inArray(k.target,a(c.exclude,g))){return}k.preventDefault();var i=g.offset();if(typeof(c.start)=="function"){c.start(g,i.top,i.left)}var j=(k.originalEvent.touches)?k.originalEvent.touches[0].pageY:k.pageY;var l=(k.originalEvent.touches)?k.originalEvent.touches[0].pageX:k.pageX;f=l-i.left,e=j-i.top;a(document).on("mousemove.drag touchmove",function(q){var m=(q.originalEvent.touches)?q.originalEvent.touches[0].pageY:q.pageY;var n=(q.originalEvent.touches)?q.originalEvent.touches[0].pageX:q.pageX;var p=(c.allowYDrag)?(m-e):(i.top);var o=(c.allowXDrag)?(n-f):(i.left);try{if(typeof(c.step)=="function"){c.step(g,p,o)}g.offset({top:p,left:o})}catch(q){console.log("step exception");a(document).off("mousemove.drag touchmove")}})});h.bind("vmouseup mouseup touchend",function(j){a(document).off("mousemove.drag touchmove");if(typeof(c.finish)=="function"){var i=g.offset();c.finish(g,i.top,i.left)}})})}}(jQuery));