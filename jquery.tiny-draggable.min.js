(function(a){a.fn.tinyDraggable=function(b){var d={handle:0,exclude:0,allowXDrag:true,allowYDrag:true,start:null,step:null,finish:null};var c=a.extend(d,b);return this.each(function(){var f,e,g=a(this),h=c.handle?a(c.handle,g):g;h.on({mousedown:function(j){if(c.exclude&&~a.inArray(j.target,a(c.exclude,g))){return}j.preventDefault();var i=g.offset();if(typeof(c.start)=="function"){c.start(g,i.top,i.left)}f=j.pageX-i.left,e=j.pageY-i.top;a(document).on("mousemove.drag",function(m){var l=(c.allowYDrag)?(m.pageY-e):(i.top);var k=(c.allowXDrag)?(m.pageX-f):(i.left);try{if(typeof(c.step)=="function"){c.step(g,l,k)}g.offset({top:l,left:k})}catch(m){console.log("step exception");a(document).off("mousemove.drag")}})},mouseup:function(j){a(document).off("mousemove.drag");if(typeof(c.finish)=="function"){var i=g.offset();c.finish(g,i.top,i.left)}}})})}}(jQuery));